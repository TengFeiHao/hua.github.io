{"version":3,"sources":["webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///src/components/QuillEditor.vue","webpack:///./src/components/QuillEditor.vue?fd04","webpack:///./src/components/QuillEditor.vue","webpack:///./node_modules/core-js/library/fn/json/stringify.js"],"names":["module","exports","default","__webpack_require__","__esModule","toolbarOptions","size","script","color","background","list","indent","align","QuillEditor","props","editorWidth","type","String","disabled","Boolean","content1","placeholder","data","quillUpdateImg","content","editorOption","this","theme","modules","toolbar","container","handlers","image","value","document","querySelector","click","quill","format","serverUrl","header","created","methods","init","onEditorChange","_ref","editor","html","text","$emit","beforeUpload","uploadSuccess","res","file","$refs","myQuillEditor","code","length","getSelection","index","insertEmbed","url","setSelection","$message","error","uploadError","components_QuillEditor","render","_vm","_h","$createElement","_c","_self","style","width","attrs","id","staticClass","action","name","headers","show-file-list","on-success","on-error","before-upload","_v","ref","options","on","change","$event","model","callback","$$v","expression","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","core","$JSON","JSON","stringify","it","apply","arguments"],"mappings":"4DAAAA,EAAAC,SAAkBC,QAAYC,EAAQ,QAAmCC,YAAA,sCCyBzE,IAAAC,IACAC,MAAA,qBACA,mDACAC,OAAA,QAAAA,OAAA,UACAC,WAAAC,eAAA,SACAC,KAAA,YAAAA,KAAA,WACAC,OAAA,OAAAA,OAAA,OACAC,WAEAC,GACAC,OACAC,aACAC,KAAAC,QAEAC,UACAF,KAAAG,QACAjB,SAAA,GAEAkB,UACAJ,KAAAC,QAEAI,aACAL,KAAAC,SAGAK,KAhBA,WAiBA,OACAC,gBAAA,EACAC,QAAA,KACAC,cACAJ,YAAAK,KAAAL,YACAM,MAAA,OACAC,SACAC,SACAC,UAAAzB,EACA0B,UACAC,MAAA,SAAAC,GACAA,EAEAC,SAAAC,cAAA,0BAAAC,QAEAV,KAAAW,MAAAC,OAAA,iBAOAC,UAAA,4BACAC,YAKAC,QA7CA,WA8CAf,KAAAF,QAAAE,KAAAN,UAEAsB,SACAC,KADA,WAEAjB,KAAAF,QAAA,IAEAoB,eAJA,SAAAC,GAIAA,EAAAC,OAAA,IAAAC,EAAAF,EAAAE,KAAAF,EAAAG,KACAtB,KAAAF,QAAAuB,EACArB,KAAAuB,MAAA,aAAAF,IAGAG,aATA,WAWAxB,KAAAH,gBAAA,GAGA4B,cAdA,SAcAC,EAAAC,GAGA,IAAAhB,EAAAX,KAAA4B,MAAAC,cAAAlB,MAEA,SAAAe,EAAAI,KAAA,CAEA,IAAAC,EAAApB,EAAAqB,eAAAC,MAEAtB,EAAAuB,YAAAH,EAAA,QAAAL,EAAAS,KAEAxB,EAAAyB,aAAAL,EAAA,QAEA/B,KAAAqC,SAAAC,MAAA,UAGAtC,KAAAH,gBAAA,GAGA0C,YAjCA,WAmCAvC,KAAAH,gBAAA,EACAG,KAAAqC,SAAAC,MAAA,aCnHeE,GADEC,OAFjB,WAA0B,IAAAC,EAAA1C,KAAa2C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAQC,MAAAN,EAAArD,aAAwB4D,OAASC,GAAA,gBAAmBL,EAAA,aAAkBM,YAAA,kBAAAF,OAAqCG,OAAAV,EAAA7B,UAAAwC,KAAA,MAAAC,QAAAZ,EAAA5B,OAAAyC,kBAAA,EAAAC,aAAAd,EAAAjB,cAAAgC,WAAAf,EAAAH,YAAA/C,SAAAkD,EAAAlD,SAAAkE,gBAAAhB,EAAAlB,gBAAoMkB,EAAAiB,GAAA,KAAAd,EAAA,gBAAiCe,IAAA,gBAAAX,OAA2BY,QAAAnB,EAAA3C,aAAAP,SAAAkD,EAAAlD,UAAmDsE,IAAKC,OAAA,SAAAC,GAA0BtB,EAAAxB,eAAA8C,KAA4BC,OAAQ1D,MAAAmC,EAAA,QAAAwB,SAAA,SAAAC,GAA6CzB,EAAA5C,QAAAqE,GAAgBC,WAAA,cAAuB,IAEtpBC,oBCCjB,IAcAC,EAdyB7F,EAAQ,OAcjC8F,CACEpF,EACAqD,GATF,EAVA,SAAAgC,GACE/F,EAAQ,SAaV,KAEA,MAUegG,EAAA,EAAAH,EAAiB,8BC1BhC,IAAAI,EAAWjG,EAAQ,QACnBkG,EAAAD,EAAAE,OAAAF,EAAAE,MAAuCC,UAAAD,KAAAC,YACvCvG,EAAAC,QAAA,SAAAuG,GACA,OAAAH,EAAAE,UAAAE,MAAAJ,EAAAK","file":"static/js/0.53766ac3003dc12b34b9.js","sourcesContent":["module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 0","<template>\r\n<div id=\"quilEditor\" :style=\"{'width':editorWidth}\">\r\n  <!-- 图片上传组件辅助-->\r\n  <el-upload\r\n    class=\"avatar-uploader\"\r\n    :action=\"serverUrl\"\r\n    name=\"img\"\r\n    :headers=\"header\"\r\n    :show-file-list=\"false\"\r\n    :on-success=\"uploadSuccess\"\r\n    :on-error=\"uploadError\"\r\n    :disabled=\"disabled\"\r\n    :before-upload=\"beforeUpload\">\r\n  </el-upload>\r\n  <quill-editor\r\n    v-model=\"content\"\r\n    ref=\"myQuillEditor\"\r\n    :options=\"editorOption\"\r\n    @change=\"onEditorChange($event)\"\r\n    :disabled=\"disabled\"\r\n  >\r\n  </quill-editor>\r\n</div>\r\n</template>\r\n<script>\r\nconst toolbarOptions = [\r\n  {'size': ['small', false, 'large']},\r\n  'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n  { 'script': 'sub' }, { 'script': 'super' },\r\n  {'color': []}, {'background': []}, 'image',\r\n  {'list': 'ordered'}, {'list': 'bullet'},\r\n  {'indent': '-1'}, {'indent': '+1'},\r\n  {'align': []}\r\n]\r\nexport default {\r\n  props: {\r\n    editorWidth: {\r\n      type: String\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    content1: {\r\n      type: String\r\n    },\r\n    placeholder: {\r\n      type: String\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      quillUpdateImg: false, // 根据图片上传状态来确定是否显示loading动画，刚开始是false,不显示\r\n      content: null,\r\n      editorOption: {\r\n        placeholder: this.placeholder,\r\n        theme: 'snow', // or 'bubble'\r\n        modules: {\r\n          toolbar: {\r\n            container: toolbarOptions,\r\n            handlers: {\r\n              'image': function (value) {\r\n                if (value) {\r\n                  // 触发input框选择图片文件\r\n                  document.querySelector('.avatar-uploader input').click()\r\n                } else {\r\n                  this.quill.format('image', false)\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      serverUrl: '/manager/common/imgUpload', // 这里写你要上传的图片服务器地址\r\n      header: {\r\n        // token: sessionStorage.token\r\n      } // 有的图片服务器要求请求头需要有token\r\n    }\r\n  },\r\n  created () {\r\n    this.content = this.content1\r\n  },\r\n  methods: {\r\n    init () {\r\n      this.content = ''\r\n    },\r\n    onEditorChange ({editor, html, text}) { // 内容改变事件\r\n      this.content = html\r\n      this.$emit('brandStore', html)\r\n    },\r\n    // 富文本图片上传前\r\n    beforeUpload () {\r\n      // 显示loading动画\r\n      this.quillUpdateImg = true\r\n    },\r\n\r\n    uploadSuccess (res, file) {\r\n      // res为图片服务器返回的数据\r\n      // 获取富文本组件实例\r\n      let quill = this.$refs.myQuillEditor.quill\r\n      // 如果上传成功\r\n      if (res.code === 200) {\r\n        // 获取光标所在位置\r\n        let length = quill.getSelection().index\r\n        // 插入图片  res.url为服务器返回的图片地址\r\n        quill.insertEmbed(length, 'image', res.url)\r\n        // 调整光标到最后\r\n        quill.setSelection(length + 1)\r\n      } else {\r\n        this.$message.error('图片插入失败')\r\n      }\r\n      // loading动画消失\r\n      this.quillUpdateImg = false\r\n    },\r\n    // 富文本图片上传失败\r\n    uploadError () {\r\n      // loading动画消失\r\n      this.quillUpdateImg = false\r\n      this.$message.error('图片插入失败')\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang='stylus' ref='stylesheet/stylus'>\r\n#quilEditor\r\n  .avatar-uploader\r\n    position absolute\r\n  .ql-formats\r\n    margin-right 0px!important\r\n    line-height: 24px!important\r\n  .ql-editor.ql-blank::before\r\n    color rgb(195,197,200)\r\n    font-style inherit\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/QuillEditor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({'width':_vm.editorWidth}),attrs:{\"id\":\"quilEditor\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.serverUrl,\"name\":\"img\",\"headers\":_vm.header,\"show-file-list\":false,\"on-success\":_vm.uploadSuccess,\"on-error\":_vm.uploadError,\"disabled\":_vm.disabled,\"before-upload\":_vm.beforeUpload}}),_vm._v(\" \"),_c('quill-editor',{ref:\"myQuillEditor\",attrs:{\"options\":_vm.editorOption,\"disabled\":_vm.disabled},on:{\"change\":function($event){_vm.onEditorChange($event)}},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0d4ef254\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/QuillEditor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0d4ef254\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./QuillEditor.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./QuillEditor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./QuillEditor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0d4ef254\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./QuillEditor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/QuillEditor.vue\n// module id = null\n// module chunks = ","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 0"],"sourceRoot":""}